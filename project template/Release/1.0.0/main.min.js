var AssetAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var s=RES.getRes(t);s?n(s):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var CheckPoint=function(t){function e(){t.call(this),this.initData()}__extends(e,t);var i=__define,n=e,s=n.prototype;return s.initData=function(){this._checkedCounts=0,this._hasChecked=!1},i(s,"checkDrag",function(){return this._checkDrag}),s.setCheckDrag=function(t){this._checkDrag=t},s.setChecked=function(t){1==t?this._checkedCounts++:this._checkedCounts--,this._hasChecked=t},i(s,"hasChecked",function(){return this._hasChecked}),i(s,"checkedCounts",function(){return this._checkedCounts}),e}(eui.Component);egret.registerClass(CheckPoint,"CheckPoint");var DigitalUtil=function(){function t(){}var e=(__define,t);e.prototype;return t.digital_000=0,t.digital_001=426,t.digital_002=396,t.digital_003=12,t.digital_004=42,t.digital_005=9,t.digital_006=10,t.digital_007=102,t.digital_008=70,t.digital_009=153,t.digital_010=236,t.digital_011=319,t.digital_012=402,t.digital_013=485,t.digital_014=319,t.digital_015=402,t.digital_016=485,t.digital_017=-290,t.digital_018=42,t}();egret.registerClass(DigitalUtil,"DigitalUtil");var DragDisplayObject=function(t){function e(){t.call(this),this.offsetX=0,this.offsetY=0}__extends(e,t);var i=(__define,e),n=i.prototype;return n.ShowItem=function(t,e){this._container=e;var i=t.resources2;t.offsetX&&(this.offsetX=parseInt(t.offsetX)),t.offsetY&&(this.offsetY=parseInt(t.offsetY));var n=/_png/g,s=i.replace(n,"");this._mc=new eui.Image,this._mc.source=CImageUtil.getImageFromeRES(i),this._mc.name=s,this._mc.ndata=t,this._container.addChild(this._mc),this._mc.touchEnabled=!1,this._mc.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),mouse.setMouseMoveEnabled(!0),this._container.stage.addEventListener(mouse.MouseEvent.MOUSE_MOVE,this.onMouseMove,this)},n.onMouseMove=function(t){this._mc&&(this._mc.x=t.stageX-this._mc.width*this._mc.scaleX/2-this._mc.anchorOffsetX*(this._mc.width*this._mc.scaleX)+this.offsetX,this._mc.y=t.stageY-this._mc.height*this._mc.scaleY/2+this._mc.anchorOffsetY*(this._mc.height*this._mc.scaleY)+this.offsetY)},n.onTouchTap=function(t){this._container.stage.removeEventListener(mouse.MouseEvent.MOUSE_MOVE,this.onMouseMove,this),mouse.setMouseMoveEnabled(!1),null!=this._mc&&this._container.contains(this._mc)&&(this._container.removeChild(this._mc),this._mc.source=null),this._container.dispatchEvent(new DataEvents(DataEvents.sceneTool_hitTest_hotspot,this._mc))},n.HideItem=function(){mouse.setMouseMoveEnabled(!1),null!=this._mc&&this._container.contains(this._mc)&&(this._container.removeChild(this._mc),this._mc.source=null)},e}(eui.Component);egret.registerClass(DragDisplayObject,"DragDisplayObject");var MenuItem=function(t){function e(){t.call(this),this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Button/MenuItemSkin.exml"},n.createChildren=function(){t.prototype.createChildren.call(this)},n.dataChanged=function(){},e}(eui.ItemRenderer);egret.registerClass(MenuItem,"MenuItem");var TabText=function(t){function e(e){t.call(this),this._dataAry=new Array,this._itemAry=new Array,this._orginX=0,this._orginY=0,this._spaceHeight=10,this.skinName="resource/eui_skins/TabText/TabTextSkin.exml",this._viewPort=this.cscorller.viewport,this._dataAry=e,this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){for(var t=0;t<this._dataAry.length;t++){var e=new TabTextItem;e.setlabelDisplay(this._dataAry[t].content),e.setTextDisplay(this._dataAry[t].content2),e.setID(this._dataAry[t].id),e.addEventListener(DataEvents.tabTextBtn_Size_updated,this.onTabTextItemSizeUpdated,this),this._viewPort.addChild(e),this._itemAry.push(e)}this.updateCoord()},n.updateCoord=function(){var t=new Array;t=this._itemAry;for(var e=0;e<t.length;e++)0==e?(t[e].x=this._orginX,t[e].y=this._orginY):(t[e].x=this._orginX,t[e].y=t[e-1].y+t[e-1].height+this._spaceHeight,this._contentHeight=t[e].y+t[e].height)},n.onTabTextItemSizeUpdated=function(t){var e=t.params;this.updateCoord(),0==e&&(this._viewPort.validateNow(),this._viewPort.scrollV=0)},e}(eui.Component);egret.registerClass(TabText,"TabText");var TabTextItem=function(t){function e(){t.call(this),this._orignHeight=24,this.skinName="resource/eui_skins/TabText/TabTextItemRendererSkin.exml",this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){mouse.setButtonMode(this.arrowButton,!0),this.textDisplay.visible=!1,this.textDisplay.wordWrap=!0,this.labelDisplay.selected=!1,this.updateSize(),this.arrowButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onArrowBtnClick,this),this.labelDisplay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onlabelDisplayClick,this)},n.setlabelDisplay=function(t){this.labelDisplay.text=t},n.setTextDisplay=function(t){this.textDisplay.text=t},n.setID=function(t){this._id=t},n.updateSize=function(t){void 0===t&&(t=!1),1==t?(this.textDisplay.height=this.textDisplay.textHeight,this.contentGroup.height=this._orignHeight+this.textDisplay.textHeight,this.height=this.contentGroup.height):(this.textDisplay.height=this._orignHeight,this.contentGroup.height=this._orignHeight,this.height=this.contentGroup.height),this.dispatchEvent(new DataEvents(DataEvents.tabTextBtn_Size_updated,t))},n.onArrowBtnClick=function(t){var e=t.currentTarget;1==e.selected?(this.textDisplay.visible=!0,this.labelDisplay.selected=!0,this.updateSize(!0)):(this.textDisplay.visible=!1,this.labelDisplay.selected=!1,this.updateSize(!1))},n.onlabelDisplayClick=function(t){var e=t.currentTarget;1==e.selected?(this.textDisplay.visible=!1,this.arrowButton.selected=!1,e.selected=!1,this.updateSize(!1)):(this.textDisplay.visible=!0,this.arrowButton.selected=!0,e.selected=!0,this.updateSize(!0))},e}(eui.Component);egret.registerClass(TabTextItem,"TabTextItem");var DataEvents=function(t){function e(e,i,n,s,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!1),void 0===a&&(a=!1),t.call(this,e,s,a),this._params=i,this._container=n}__extends(e,t);var i=__define,n=e,s=n.prototype;return i(s,"params",function(){return this._params}),i(s,"container",function(){return this._container}),e.change_panel="change_panel",e.Menuanel_Item_Click="Menuanel_Item_Click",e.tabTextBtn_Size_updated="tabTextBtn_Size_updated",e.MC_play_LoopCompleted="MC_play_LoopCompleted",e.MC_play_completed="MC_play_completed",e.xml_load_completed="xml_load_completed",e.Refresh_MainPanel="Refresh_MainPanel",e.show_scene_part="show_scene_part",e.show_sence_tool="show_sence_tool",e.hide_sceneItem="hide_sceneItem",e.show_icon_part="show_icon_part",e.hide_icon_part="hide_icon_part",e.goto_next_scene="goto_next_scene",e.sceneTool_hitTest_hotspot="sceneTool_hitTest_hotspot",e.load_res_group="load_res_group",e.add_training_records="add_training_records",e.add_training_records_2="add_training_records_2",e.return_to_mainEntryPanel="return_to_mainEntryPanel",e.open_record_panel="open_record_panel",e.get_total_score="get_total_score",e.show_torqueSelectPanel="show_torqueSelectPanel",e.torque_selected="torque_selected",e.refresh_video_panel="refresh_video_panel",e}(egret.Event);egret.registerClass(DataEvents,"DataEvents");var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=0,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(t,e){this.textField.text="Loading..."+(t/e*100).toFixed(1)+"%"},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),this.loadingView.x=(this.stage.stageWidth-this.loadingView.width)/2,this.loadingView.y=(this.stage.stageHeight-this.loadingView.height)/2,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload2")},n.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.onResourceLoadComplete=function(t){"preload2"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},n.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},n.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.onResourceProgress=function(t){"preload2"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},n.startCreateScene=function(){mouse.enable(this.stage),this._mainPanel=new MainEntryPanel,this.addChild(this._mainPanel),this._mainPanel.x=0,this._mainPanel.y=0,this._mainPanel.addEventListener(DataEvents.return_to_mainEntryPanel,this.onReturnToMainEntryPanel,this)},n.onReturnToMainEntryPanel=function(t){null!=this._mainPanel&&this.contains(this._mainPanel)&&(this.removeChild(this._mainPanel),this._mainPanel=null,this._mainPanel=new MainEntryPanel,this.addChild(this._mainPanel),this._mainPanel.x=0,this._mainPanel.y=0,this._mainPanel.addEventListener(DataEvents.Refresh_MainPanel,this.onReturnToMainEntryPanel,this))},e}(eui.UILayer);egret.registerClass(Main,"Main");var MainEntryPanel=function(t){function e(){t.call(this),this._model=0,this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Panel/MainEntryPanelSkin.exml",this.btn_demo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnDemoTap,this),this.btn_exercise.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnExerciseTap,this),this.btn_test.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnTestTap,this)},n.addJSON=function(){var t=RES.getRes("modelInfo_json");t.menu.Item},n.onBtnDemoTap=function(t){null==this._videoPanel?(this._videoPanel=new VideoPanel,this.addChild(this._videoPanel),this._videoPanel.addEventListener(DataEvents.refresh_video_panel,this.onRefreshVideoPanel,this),this._videoPanel.x=DigitalUtil.digital_000,this._videoPanel.y=DigitalUtil.digital_000,this._videoPanel.updataResources("resource/assets/Video/a1.mp4")):(this._videoPanel.visible=!0,this._videoPanel.updataResources("resource/assets/Video/a1.mp4"))},n.onRefreshVideoPanel=function(t){null!=this._videoPanel&&this.contains(this._videoPanel)&&(this._videoPanel.removeEventListener(DataEvents.refresh_video_panel,this.onRefreshVideoPanel,this),this.removeChild(this._videoPanel),this._videoPanel=null,this._videoPanel=new VideoPanel,this.addChild(this._videoPanel),this._videoPanel.addEventListener(DataEvents.refresh_video_panel,this.onRefreshVideoPanel,this),this._videoPanel.x=DigitalUtil.digital_000,this._videoPanel.y=DigitalUtil.digital_000,this._videoPanel.updataResources("resource/assets/Video/a1.mp4"))},n.onBtnExerciseTap=function(t){this._mainPanel=new MainPanel,this.addChild(this._mainPanel),this._mainPanel.x=DigitalUtil.digital_000,this._mainPanel.y=DigitalUtil.digital_000,this._mainPanel.addEventListener(DataEvents.Refresh_MainPanel,this.onRefreshPanel,this),this._mainPanel.addEventListener(DataEvents.return_to_mainEntryPanel,this.onReturnToMainEntryPanel,this),this._model=0,this._mainPanel.setVirtualModel(this._model)},n.onRefreshPanel=function(t){null!=this._mainPanel&&this.contains(this._mainPanel)&&(this.removeChild(this._mainPanel),this._mainPanel=null,this._mainPanel=new MainPanel,this.addChild(this._mainPanel),this._mainPanel.x=DigitalUtil.digital_000,this._mainPanel.y=DigitalUtil.digital_000,this._mainPanel.addEventListener(DataEvents.Refresh_MainPanel,this.onRefreshPanel,this),this._mainPanel.addEventListener(DataEvents.return_to_mainEntryPanel,this.onReturnToMainEntryPanel,this),this._mainPanel.setVirtualModel(this._model))},n.onReturnToMainEntryPanel=function(t){null!=this._mainPanel&&this.contains(this._mainPanel)&&(this.removeChild(this._mainPanel),this._mainPanel=null)},n.onBtnTestTap=function(t){this._mainPanel=new MainPanel,this.addChild(this._mainPanel),this._mainPanel.x=DigitalUtil.digital_000,this._mainPanel.y=DigitalUtil.digital_000,this._mainPanel.addEventListener(DataEvents.Refresh_MainPanel,this.onRefreshPanel,this),this._mainPanel.addEventListener(DataEvents.return_to_mainEntryPanel,this.onReturnToMainEntryPanel,this),this._model=1,this._mainPanel.setVirtualModel(this._model)},e}(eui.Component);egret.registerClass(MainEntryPanel,"MainEntryPanel");var MainPanel=function(t){function e(){t.call(this),this._tabBtnAry=new Array,this._littlePanelAry=new Array,this._groupNameAry=new Array,this.totalScore=0,this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Panel/MainPanelSkin.exml";for(var t=0;t<this.numChildren;t++)-1!=this.getChildAt(t).name.indexOf("tabBtn_")&&(this._tabBtnAry.push(this.getChildAt(t)),mouse.setButtonMode(this.getChildAt(t),!0),this.getChildAt(t).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTabBtnTouchTap,this));this.addPanels()},n.addPanels=function(){this._mainScenePanel=new MainScenePanel,this.addChild(this._mainScenePanel),this._mainScenePanel.addEventListener(DataEvents.goto_next_scene,this.onGotoNextScene,this),this._mainScenePanel.addEventListener(DataEvents.show_icon_part,this.onShowPartIcon,this),this._mainScenePanel.addEventListener(DataEvents.hide_icon_part,this.onHidePartIcon,this),this._mainScenePanel.addEventListener(DataEvents.add_training_records,this.onAddTrainingRecords,this),this._mainScenePanel.addEventListener(DataEvents.show_torqueSelectPanel,this.onShowTorqueSelectPanel,this),this._recordsPanel=new RecordsPanel,this.addChild(this._recordsPanel),this.initLittlePanel(this._recordsPanel),this._standardPanel=new StandardPanel,this.addChild(this._standardPanel),this.initLittlePanel(this._standardPanel),this._partsPanel=new PartsPanel,this.addChild(this._partsPanel),this.initLittlePanel(this._partsPanel),this._partsPanel.addEventListener(DataEvents.show_scene_part,this.onShowScenePart,this),this._toolsPanel=new ToolsPanel,this.addChild(this._toolsPanel),this.initLittlePanel(this._toolsPanel),this._toolsPanel.addEventListener(DataEvents.show_sence_tool,this.onShowTool,this),this._menuPanel=new MenuPanel,this.addChild(this._menuPanel),this._menuPanel.addEventListener(DataEvents.Menuanel_Item_Click,this.onMenuItemClick,this),this._menuPanel.addEventListener(DataEvents.load_res_group,this.onLoadRESGroup,this),this._submitPanel=new SubmitsPanel,this.addChild(this._submitPanel),this._submitPanel.addEventListener(DataEvents.get_total_score,this.onGetTotalScore,this),this._submitPanel.addEventListener(DataEvents.return_to_mainEntryPanel,this.onReturnToMainEntryPanel,this),this._submitPanel.addEventListener(DataEvents.open_record_panel,this.onOpenRecordPanel,this),this._submitPanel.visible=!1,this._refreshPanel=new RefreshPanel,this.addChild(this._refreshPanel),this._refreshPanel.addEventListener(DataEvents.Refresh_MainPanel,this.onRefreshMainPanel,this),this._refreshPanel.visible=!1,this._torqueSelectPanel=new TorqueSelectPanel,this.addChild(this._torqueSelectPanel),this._torqueSelectPanel.addEventListener(DataEvents.torque_selected,this.onTorqueSelected,this),this._torqueSelectPanel.addEventListener(DataEvents.add_training_records,this.onAddTrainingRecords2,this),this._torqueSelectPanel.visible=!1},n.initLittlePanel=function(t){t.x=(this.width-t.width)/2,t.y=(this.height-t.height)/2,this._littlePanelAry.push(t),t.visible=!1},n.onTabBtnTouchTap=function(t){var e=t.currentTarget;switch(e){case this.tabBtn_record:this.onShowOrHidePanel(this._recordsPanel);break;case this.tabBtn_standard:this.onShowOrHidePanel(this._standardPanel);break;case this.tabBtn_tools:this.onShowOrHidePanel(this._toolsPanel);break;case this.tabBtn_parts:this.onShowOrHidePanel(this._partsPanel);break;case this.tabBtn_refresh:this.onRefreshPanel();break;case this.tabBtn_submit:this.onSubmitPanel();break;case this.tabBtn_return:egret.Event.dispatchEvent(this,DataEvents.return_to_mainEntryPanel)}},n.onShowOrHidePanel=function(t){1==t.visible?t.visible=!1:(t.visible=!0,this.closelittlPanel(t))},n.closelittlPanel=function(t){this.setChildIndex(t,this.numChildren-1);for(var e=0;e<this._littlePanelAry.length;e++)this._littlePanelAry[e]!=t&&(this._littlePanelAry[e].visible=!1)},n.removePanel=function(t){null!=t&&this.contains(t)&&(this.removeChild(t),t=null)},n.setVirtualModel=function(t){this._model=t,0==this._model?(this.tabBtn_submit.visible=!1,this.tabBtn_record.visible=!0,this.tabBtn_standard.visible=!0,this.tabBtn_tools.visible=!0,this.tabBtn_parts.visible=!0,this.tabBtn_refresh.visible=!0,this.tabBtn_return.visible=!0,this.tabBtn_return.y=DigitalUtil.digital_008,this.tabBtn_record.y=DigitalUtil.digital_009,this.tabBtn_standard.y=DigitalUtil.digital_010,this.tabBtn_tools.y=DigitalUtil.digital_011,this.tabBtn_parts.y=DigitalUtil.digital_012,this.tabBtn_refresh.y=DigitalUtil.digital_013,this._menuPanel.visible=!0):1==this._model&&(this.tabBtn_record.visible=!1,this.tabBtn_standard.visible=!1,this.tabBtn_refresh.visible=!1,this.tabBtn_return.visible=!1,this.tabBtn_tools.visible=!0,this.tabBtn_parts.visible=!0,this.tabBtn_submit.visible=!0,this.tabBtn_tools.y=DigitalUtil.digital_014,this.tabBtn_parts.y=DigitalUtil.digital_015,this.tabBtn_submit.y=DigitalUtil.digital_016,this._menuPanel.visible=!1),this._mainScenePanel.setVirtualModel(this._model)},n.onRefreshPanel=function(){0==this._refreshPanel.visible&&(this._refreshPanel.visible=!0),this.setChildIndex(this._refreshPanel,this.numChildren-1)},n.onRefreshMainPanel=function(t){egret.Event.dispatchEvent(this,DataEvents.Refresh_MainPanel)},n.onSubmitPanel=function(){0==this._submitPanel.visible&&(this._submitPanel.visible=!0),this.setChildIndex(this._submitPanel,this.numChildren-1)},n.onGetTotalScore=function(t){this._submitPanel.setScore(this.totalScore.toString()),this._mainScenePanel.addUnfinishedRecord(1)},n.onReturnToMainEntryPanel=function(t){egret.Event.dispatchEvent(this,DataEvents.return_to_mainEntryPanel)},n.onOpenRecordPanel=function(t){this._recordsPanel.visible=!0,this.closelittlPanel(this._recordsPanel)},n.onMenuItemClick=function(t){var e=t.params,i=parseInt(e.partGroup.toString()),n=e.resources;this._partsPanel.setIconItem(i),this._mainScenePanel.setSenceItem(n);for(var s=!1,a=parseInt(e.id.toString()),o="scene"+a.toString(),r=!1,h=parseInt(e.id.toString())+1,l="scene"+h.toString(),d=0;d<this._groupNameAry.length;d++)l==this._groupNameAry[d]&&(r=!0),o==this._groupNameAry[d]&&(s=!0);0==s&&(new CRESLoadUtil(o),this._groupNameAry.push(o)),0==r&&(new CRESLoadUtil(l),this._groupNameAry.push(l))},n.onLoadRESGroup=function(t){for(var e=!1,i=parseInt(t.params.toString())+1,n="scene"+i.toString(),s=0;s<this._groupNameAry.length;s++)n==this._groupNameAry[s]&&(e=!0);0==e&&(new CRESLoadUtil(n),this._groupNameAry.push(n))},n.onGotoNextScene=function(t){var e=t.params;if(null!=e.isLV1SceneNext)if("true"==e.isLV1SceneNext){var i=parseInt(e.nextSceneID.toString())-1,n=parseInt(e.nextPartGroup.toString()),s=parseInt(e.sceneID),a=parseInt(e.nextSceneID);if(1==this._model&&(this.totalScore=this.totalScore+parseInt(e.score),this.addTrainingRecords(e.content+"   [操作完成]+"+e.score+"   [总分："+this.totalScore.toString()+"]","right"),s>a))return;this._partsPanel.setIconItem(n),this._menuPanel.osetMenuSelectedIndex(i),this._mainScenePanel.setSenceItem(e.nextScenName)}else this._mainScenePanel.setSenceItem(e.nextScenName)},n.onShowScenePart=function(t){var e=t.params;this._mainScenePanel.showSencePart(e)},n.onShowPartIcon=function(t){this._partsPanel.showItem(t.params)},n.onHidePartIcon=function(t){this._partsPanel.hideItem(t.params)},n.onShowTool=function(t){var e=t.params;this._mainScenePanel.showSenceTool(e)},n.onShowTorqueSelectPanel=function(t){var e=t.params;this._torqueSelectPanel.visible=!0,this._torqueSelectPanel.setAttribute(e)},n.onTorqueSelected=function(t){var e=t.params;this._mainScenePanel.playItemAni(e)},n.onAddTrainingRecords2=function(t){var e=t.params,i=e.score;1==e.isRight?this.totalScore=this.totalScore+i:0==e.isRight&&(this.totalScore=this.totalScore-i),this._recordsPanel.AddMsg(e.record,e.color)},n.onAddTrainingRecords=function(t){var e=t.params;this._recordsPanel.AddMsg(e.records,e.color)},n.addTrainingRecords=function(t,e){1==this._model&&this._recordsPanel.AddMsg(t,e)},e}(eui.Component);egret.registerClass(MainPanel,"MainPanel");var MainScenePanel=function(t){function e(){t.call(this),this._model=0,this._DragDisplayObject=new DragDisplayObject,this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){this.skinName="resource/eui_skins/Panel/MainScenePanelSkin.exml",this.x=DigitalUtil.digital_000,this.y=DigitalUtil.digital_000},n.setVirtualModel=function(t){this._model=t},n.setSenceItem=function(t){null!=this._subScenePanel&&this.contains(this._subScenePanel)&&(this.removeChild(this._subScenePanel),this._subScenePanel=null),this._subScenePanel=new SubScenePanel,this.addChild(this._subScenePanel),this._subScenePanel.x=DigitalUtil.digital_000,this._subScenePanel.y=DigitalUtil.digital_000,this._subScenePanel.addEventListener(DataEvents.goto_next_scene,this.onGotoNextScene,this),this._subScenePanel.addEventListener(DataEvents.hide_sceneItem,this.onHideSceneItem,this),this._subScenePanel.addEventListener(DataEvents.show_icon_part,this.onShowPartIcon,this),this._subScenePanel.addEventListener(DataEvents.hide_icon_part,this.onHidePartIcon,this),this._subScenePanel.addEventListener(DataEvents.add_training_records,this.onAddTrainingTecords,this),this._subScenePanel.addEventListener(DataEvents.show_torqueSelectPanel,this.onShowTorqueSelectPanel,this),this._subScenePanel.setVirtualModel(this._model),this._subScenePanel.setSkinName(t)},n.showSencePart=function(t){this._DragDisplayObject.ShowItem(t,this),this._subScenePanel.hideHotspot2(t)},n.showSenceTool=function(t){this._DragDisplayObject.ShowItem(t,this),this._subScenePanel.hideHotspot(t)},n.onHideSceneItem=function(t){this._DragDisplayObject.HideItem(),this._subScenePanel.showHopspot()},n.onGotoNextScene=function(t){this.dispatchEvent(new DataEvents(DataEvents.goto_next_scene,t.params))},n.onShowPartIcon=function(t){this.dispatchEvent(new DataEvents(DataEvents.show_icon_part,t.params))},n.onHidePartIcon=function(t){this.dispatchEvent(new DataEvents(DataEvents.hide_icon_part,t.params))},n.onAddTrainingTecords=function(t){this.dispatchEvent(new DataEvents(DataEvents.add_training_records,t.params))},n.onShowTorqueSelectPanel=function(t){this.dispatchEvent(new DataEvents(DataEvents.show_torqueSelectPanel,t.params))},n.playItemAni=function(t){this._subScenePanel.playItemAni(t)},n.addUnfinishedRecord=function(t){this._subScenePanel.addUnfinishedRecord(t)},e}(eui.Component);egret.registerClass(MainScenePanel,"MainScenePanel");var MenuPanel=function(t){function e(){t.call(this),this._X=DigitalUtil.digital_017,this._isShowPanel=!1,this._duration=500,this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){this.skinName="resource/eui_skins/Panel/MenuPanelSkin.exml",CXMLUtil.addXML("resource/assets/DataTable/menuInfo.xml",this),this.addEventListener("xml_load_completed",this.onXML_load_Completed,this),this.x=this._X,this.addOpenOrClosedPanel()},n.addJSON=function(){var t=RES.getRes("menuInfo_json"),e=t.menu.Item,i=new eui.List;new eui.ArrayCollection;i.dataProvider=new eui.ArrayCollection(e),i.itemRenderer=MenuItem,this.addChild(i),i.y=DigitalUtil.digital_018,i.selectedIndex=0,i.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.dispatchEvent(new DataEvents(DataEvents.Menuanel_Item_Click,e[0])),this._list=i},n.onXML_load_Completed=function(t){for(var e=new Array,i=t.params,n=i.children,s=0;s<n.length;s++){var a=new Object,o=n[s];a.id=o.attributes.id,a.content=o.attributes.content,a.type=o.attributes.type,a.bg_up=o.attributes.bg_up,a.partGroup=o.attributes.partGroup,a.resources=o.attributes.resources,e.push(a)}var r=new eui.List;new eui.ArrayCollection;r.dataProvider=new eui.ArrayCollection(e),r.itemRenderer=MenuItem,this.addChild(r),r.y=DigitalUtil.digital_018,r.selectedIndex=0,r.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onChange,this),this.dispatchEvent(new DataEvents(DataEvents.Menuanel_Item_Click,e[0])),this._list=r,this._dataAry=e},n.onChange=function(t){var e=t.currentTarget.selectedItem;console.log(t.currentTarget.selectedIndex+"__"+e.content),this.dispatchEvent(new DataEvents(DataEvents.Menuanel_Item_Click,e))},n.addOpenOrClosedPanel=function(){this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMenuOver,this)},n.onMenuOver=function(t){function e(){this._isShowPanel=!0}this.removeEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMenuOver,this),this.addEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMenuOut,this),egret.Tween.removeTweens(this),egret.Tween.get(this,{loop:!1,onChangeObj:this}).to({x:0},this._duration).wait(0).call(e,this,["param1",{key:"key",value:3}])},n.onMenuOut=function(t){function e(){}this.addEventListener(mouse.MouseEvent.MOUSE_OVER,this.onMenuOver,this),this.removeEventListener(mouse.MouseEvent.MOUSE_OUT,this.onMenuOut,this),egret.Tween.removeTweens(this),egret.Tween.get(this,{loop:!1,onChangeObj:this}).to({x:this._X},this._duration).wait(0).call(e,this,["param1",{key:"key",value:3}])},n.osetMenuSelectedIndex=function(t){this._list.selectedIndex=t,this.dispatchEvent(new DataEvents(DataEvents.load_res_group,t))},e}(eui.Component);egret.registerClass(MenuPanel,"MenuPanel");var MouseTipPanel=function(t){function e(){t.call(this),this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Panel/MouseTipPanelSkin.exml",this.txt_tip=new eui.Label,this.addChild(this.txt_tip),this.txt_tip.x=0,this.txt_tip.y=0,this.txt_tip.size=14,this.txt_tip.textColor=0,this.txt_tip.fontFamily="宋体",this.txt_tip.width=DigitalUtil.digital_007,this.txt_tip.lineSpacing=2,this.txt_tip.wordWrap=!0},n.setTips=function(t){this.txt_tip.text=t;var e=this.txt_tip.textWidth;this.bg_1.width=e,this.width=e},n.setTips2=function(t,e,i){function n(i){var n=i.currentTarget;if(!e.contains(a)){e.addChild(a),t.ndata&&(a.txt_tip.text=t.ndata.name);var s=a.txt_tip.width;a.bg_1.width=s,a.width=s,a.x=n.x,a.y=n.y+n.height}}function s(t){t.currentTarget;e.contains(a)&&e.removeChild(a)}void 0===i&&(i=null);var a=this;t.addEventListener("mouseOver",n,this),t.addEventListener("mouseOut",s,this)},e}(eui.Component);egret.registerClass(MouseTipPanel,"MouseTipPanel");var PartsPanel=function(t){function e(){t.call(this),this._maxIndex=DigitalUtil.digital_005,this.itemBtnAry=new Array,this.itemDataAry=new Array,this.tip=new MouseTipPanel,this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Panel/PartsPanelSkin.exml",mouse.setButtonMode(this.btn_rigth,!0),mouse.setButtonMode(this.btn_left,!0),mouse.setButtonMode(this.btn_close,!0),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTouchTap,this),this.btn_rigth.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnRightTouchTap,this),this.btn_left.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnLeftTouchTap,this);for(var t=0;t<this.numChildren;t++)-1!=this.getChildAt(t).name.indexOf("item_")&&this.itemBtnAry.push(this.getChildAt(t));var e=this.itemBtnAry.length+1;this.itemBtnAry=[];for(var i=1;e>i;i++){var n=this["item_"+i];this.itemBtnAry.push(n),n.source=null,mouse.setButtonMode(n,!0),this.tip.setTips2(n,this),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onIconPartTouchTap,this)}this.setTxtPageValue(1,1),this.addJSON()},n.addJSON=function(){var t=RES.getRes("partsInfo_json"),e=t.menu.Item;this.itemDataAry=e},n.setIconItem=function(t){this._tempItemDataAry=new Array;for(var e=0;e<this.itemDataAry.length;e++){this.itemDataAry[e].isUse="false";var i=parseInt(this.itemDataAry[e].group);t>i&&this._tempItemDataAry.push(this.itemDataAry[e])}var n=this._tempItemDataAry.concat();n.reverse();for(var s=0;s<this.itemBtnAry.length;s++){var a=this.itemBtnAry[s];a.source=null,n[s]&&(a.source=CImageUtil.getImageFromeRES(n[s].resources),a.ndata=n[s])}this._totalIndex=this._tempItemDataAry.length,this._tempItemDataAry.length>=this._maxIndex?this._currentIndex=this._maxIndex:this._currentIndex=this._tempItemDataAry.length,this.setTxtPageValue(this._currentIndex,this._totalIndex)},n.onBtnRightTouchTap=function(t){if(!(this._totalIndex<=this._maxIndex||this._currentIndex>=this._totalIndex)){for(var e=0;e<this.itemBtnAry.length;e++){var i=this.itemBtnAry[e];i.source=null;var n=this._currentIndex+e;this._tempItemDataAry[n]&&(i.source=CImageUtil.getImageFromeRES(this._tempItemDataAry[n].resources),i.ndata=this._tempItemDataAry[n])}this._currentIndex=this._currentIndex+this._maxIndex,this.setTxtPageValue(this._currentIndex,this._totalIndex)}},n.onBtnLeftTouchTap=function(t){if(!(this._totalIndex<=this._maxIndex||this._currentIndex<=this._maxIndex)){for(var e=0;e<this.itemBtnAry.length;e++){var i=this.itemBtnAry[e];i.source=null;var n=this._currentIndex-2*this._maxIndex+e;this._tempItemDataAry[n]&&(i.source=CImageUtil.getImageFromeRES(this._tempItemDataAry[n].resources),i.ndata=this._tempItemDataAry[n])}this._currentIndex=this._currentIndex-this._maxIndex,this.setTxtPageValue(this._currentIndex,this._totalIndex)}},n.setTxtPageValue=function(t,e){var i=Math.ceil(t/this._maxIndex),n=Math.ceil(e/this._maxIndex);this.txt_page.text=i.toString()+" / "+n.toString()},n.onBtnCloseTouchTap=function(t){this.visible=!1},n.onIconPartTouchTap=function(t){var e=t.currentTarget,i=e.ndata;this.sendMessage(i)},n.showItem=function(t){for(var e=0;e<this.itemDataAry.length;e++)this.itemDataAry[e].iname==t&&this._tempItemDataAry.push(this.itemDataAry[e]);for(var i=0;i<this._tempItemDataAry.length;i++)this._tempItemDataAry[i].iname==t&&(this._tempItemDataAry[i].isUse="false");this.updateItem()},n.hideItem=function(t){for(var e=0;e<this.itemDataAry.length;e++)this.itemDataAry[e].iname==t&&this._tempItemDataAry.push(this.itemDataAry[e]);for(var i=0;i<this._tempItemDataAry.length;i++)this._tempItemDataAry[i].iname==t&&(this._tempItemDataAry[i].isUse="true");this.updateItem()},n.updateItem=function(){for(var t=new Array,e=0;e<this._tempItemDataAry.length;e++)"false"==this._tempItemDataAry[e].isUse&&t.push(this._tempItemDataAry[e]);
var i=t.concat();i.reverse();for(var n=0;n<this.itemBtnAry.length;n++){var s=this.itemBtnAry[n];s.source=null,i[n]&&(s.source=CImageUtil.getImageFromeRES(i[n].resources),s.ndata=i[n])}this._tempItemDataAry=t,this._totalIndex=this._tempItemDataAry.length,this._tempItemDataAry.length>=this._maxIndex?this._currentIndex=this._maxIndex:this._currentIndex=this._tempItemDataAry.length,this.setTxtPageValue(this._currentIndex,this._totalIndex)},n.sendMessage=function(t){this.visible=!1,this.dispatchEvent(new DataEvents(DataEvents.show_scene_part,t))},e}(eui.Component);egret.registerClass(PartsPanel,"PartsPanel");var RecordsPanel=function(t){function e(){t.call(this),this._Y=0,this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Panel/RecordsPanelSkin.exml",mouse.setButtonMode(this.btn_close,!0),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTouchTap,this),this.txt_info.lineSpacing=3,this.txt_info.wordWrap=!0,this.txt_info.x=0,this.txt_info.y=0,this._container.x=0,this._container.y=0;var t=new eui.Group;t.addChild(this._container);var e=new eui.Scroller;e.width=DigitalUtil.digital_001,e.height=DigitalUtil.digital_002,e.viewport=t,this.addChild(e),e.x=DigitalUtil.digital_003,e.y=DigitalUtil.digital_004},n.onBtnCloseTouchTap=function(t){this.visible=!1},n.AddMsg=function(t,e){void 0===e&&(e="normal");var i,n,s;switch(e){case"right":i=255;break;case"wrong":i=16724787;break;case"normal":i=0;break;default:i=10066329}n=this.getTime3(),""==this.txt_info.text?this.txt_info.text=n+t:this.txt_info.text=this.txt_info.text+"\r"+n+t,this.txt_info.height=this.txt_info.textHeight,""!=t&&(s=n+t);var a=new egret.TextField;a=new egret.TextField,a.width=426,a.height=396,a.x=0,a.y=this._Y,a.wordWrap=!0,a.lineSpacing=3,a.textFlow=[{text:s,style:{textColor:i,size:15}}],this._container.addChild(a),this._Y=a.y+a.textHeight+3,this._container.height=this._Y},n.getTime3=function(){var t="",e=new Date,i=this.getPrefixNum(e.getHours()),n=this.getPrefixNum(e.getMinutes()),s=this.getPrefixNum(e.getSeconds());return t="["+i+":"+n+":"+s+"]   "},n.getPrefixNum=function(t){return 10>t&&t>=0?"0"+t.toString():t.toString()},e}(eui.Component);egret.registerClass(RecordsPanel,"RecordsPanel");var RefreshPanel=function(t){function e(){t.call(this),this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){this.skinName="resource/eui_skins/Panel/RefreshPanelSkin.exml",mouse.setButtonMode(this.btn_close,!0),mouse.setButtonMode(this.btn_yes,!0),mouse.setButtonMode(this.btn_no,!0),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnYesTap,this),this.btn_no.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnNoTap,this)},n.onBtnCloseTap=function(t){this.visible=!1},n.onBtnYesTap=function(t){egret.Event.dispatchEvent(this,DataEvents.Refresh_MainPanel)},n.onBtnNoTap=function(t){this.visible=!1},e}(eui.Component);egret.registerClass(RefreshPanel,"RefreshPanel");var SubScenePanel=function(t){function e(){t.call(this),this.itemDataAry=new Array,this.isSceneOperateCompleted=!1,this._hotspotsAry=new Array,this._model=0,this.addJSON(),this.addHotspotsJSON()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.addJSON=function(){var t=RES.getRes("senceInfo_json"),e=t.menu.Item;this.itemDataAry=e},n.addHotspotsJSON=function(){var t=RES.getRes("hotspotInfo_json"),e=t.menu.Item;this.hotspotsDataAry=e},n.setSkinName=function(t){for(var e,i=0;i<this.itemDataAry.length;i++)this.itemDataAry[i].nowScenName==t&&(e=this.itemDataAry[i].id,this._sceneData=this.itemDataAry[i]);this.skinName="resource/eui_skins/Scenes/"+t,this.setHotspots(e),this._sceneID=e,this.isSceneOperateCompleted=!1},n.addUnfinishedRecord=function(t){for(var e,i=new Object,n=0;n<this.itemDataAry.length;n++){var s=parseInt(this.itemDataAry[n].id);0==this.isSceneOperateCompleted?s>=this._sceneID&&null!=this.itemDataAry[n].content&&""!=this.itemDataAry[n].content&&(e=this.itemDataAry[n].content+" [未操作] ["+this.itemDataAry[n].score+"分]",i.records=e,i.color="wrong",this.dispatchEvent(new DataEvents(DataEvents.add_training_records,i))):1==this.isSceneOperateCompleted&&s>this._sceneID&&null!=this.itemDataAry[n].content&&""!=this.itemDataAry[n].content&&(e=this.itemDataAry[n].content+" [未操作] ["+this.itemDataAry[n].score+"分]",i.records=e,i.color="wrong",this.dispatchEvent(new DataEvents(DataEvents.add_training_records,i)))}},n.setHotspots=function(t){this.tempSenceDataObj=new Object;for(var e=0;e<this.itemDataAry.length;e++){var i=parseInt(this.itemDataAry[e].id);i==t&&(this.tempSenceDataObj=this.itemDataAry[e])}this._sceneType=parseInt(this.tempSenceDataObj.sceneType.toString());var n=this.tempSenceDataObj.hotspots;if(""!=n&&null!=n){this._hotspotsAry=n.split(",");for(var s=0;s<this._hotspotsAry.length;s++){for(var a=this["hotspot_"+this._hotspotsAry[s]],o=0;o<this.hotspotsDataAry.length;o++)this._hotspotsAry[s]==this.hotspotsDataAry[o].id&&null!=a&&(a.ndata=this.hotspotsDataAry[o],1==this._sceneType&&""!=a.ndata.scenePartID&&(this[a.ndata.scenePartID].visible=!1));0==this._model?a.alpha=1:1==this._model&&(a.alpha=0),s>=1&&null!=a&&(a.visible=!1)}this._nowHotspot=this["hotspot_"+this._hotspotsAry[0]];for(var r=0;r<this._hotspotsAry.length;r++){var h=this["hotspot_"+this._hotspotsAry[r]];null!=h&&h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHotspotsTap,this)}this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHotspotsTap,this)}},n.onHotspotsTap=function(t){this._currentHotspot=t.currentTarget;var e=t.currentTarget;if(-1==e.name.indexOf("hotspot_"))return void this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem));var i=this.tempSenceDataObj.sceneAni,n=parseInt(this.tempSenceDataObj.sceneAniCount);this._currentClickHotspot=e;var s,a,o=e.ndata,r=o.toolAni,h=parseInt(o.toolAniCount),l=this.parent,d=0,_=0,c=new Object;if(c.color="normal",0==this._sceneType){if("true"==o.isGotoNextScene){if("0"==o.gotoNextSceneWay)c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),""!=o.scenePartID&&(this[o.scenePartID].visible=!1),""!=o.partPanelIconID&&this.dispatchEvent(new DataEvents(DataEvents.show_icon_part,o.partPanelIconID)),CMovieClipUtil.playMovieClip2(this,i,n),this.isSceneOperateCompleted=!0,this.addEventListener(DataEvents.MC_play_completed,this.onSenceAniPlayCompleted,this);else if("1"==o.gotoNextSceneWay){if(""==o.useToolID)return;for(d=0;d<l.numChildren;d++)-1!=l.getChildAt(d).name.indexOf("tool_")&&(s=l.getChildAt(d));if(null!=s){if(s.ndata.senceItemID!=o.useToolID)return;var u=CHitTestUtil.hitTestRect(e,s);1==u&&(this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),CMovieClipUtil.playMovieClip2(this,r,h),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted,this),this.showTorqueTip(r))}}}else if("false"==o.isGotoNextScene)if(""==o.useToolID)e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),""!=o.scenePartID&&(this[o.scenePartID].visible=!1),""!=o.partPanelIconID&&this.dispatchEvent(new DataEvents(DataEvents.show_icon_part,o.partPanelIconID)),this.hideHotspots(parseInt(o.nextHotspot));else{for(d=0;d<l.numChildren;d++)-1!=l.getChildAt(d).name.indexOf("tool_")&&(s=l.getChildAt(d));if(null!=s){if(s.ndata.senceItemID!=o.useToolID)return;var u=CHitTestUtil.hitTestRect(e,s);1==u&&(this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),CMovieClipUtil.playMovieClip2(this,r,h),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted2,this),this.showTorqueTip(r))}}}else if(1==this._sceneType)if("true"==o.isGotoNextScene){if(""==o.useToolID)if("3"==o.gotoNextSceneWay){for(_=0;_<l.numChildren;_++)-1!=l.getChildAt(_).name.indexOf("part_")&&(a=l.getChildAt(_));if(null!=a){if(a.ndata.iname!=o.scenePartID)return;var u=CHitTestUtil.hitTestRect(e,a);1==u&&(e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),""!=o.scenePartID&&(this[o.scenePartID].visible=!0),""!=o.partPanelIconID&&this.dispatchEvent(new DataEvents(DataEvents.hide_icon_part,o.partPanelIconID)),CMovieClipUtil.playMovieClip2(this,i,n),this.isSceneOperateCompleted=!0,this.addEventListener(DataEvents.MC_play_completed,this.onSenceAniPlayCompleted,this))}}else"2"==o.gotoNextSceneWay&&(e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),console.log("开始播放转场动画："),CMovieClipUtil.playMovieClip2(this,i,n),this.isSceneOperateCompleted=!0,this.addEventListener(DataEvents.MC_play_completed,this.onSenceAniPlayCompleted,this));else if("4"==o.gotoNextSceneWay){for(d=0;d<l.numChildren;d++)-1!=l.getChildAt(d).name.indexOf("tool_")&&(s=l.getChildAt(d));if(null!=s){if(s.ndata.senceItemID!=o.useToolID)return;var u=CHitTestUtil.hitTestRect(e,s);if(1==u)if(1==this._model)if(null!=o.TorqueSelectIndex&&""!=o.TorqueSelectIndex){var v=new Object,p=new Object;p.type=1,p.target=e,p._toolAniID=r,p._toolAniCount=h,v.ndata=o,v.ndata2=p,this.dispatchEvent(new DataEvents(DataEvents.show_torqueSelectPanel,v))}else this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),CMovieClipUtil.playMovieClip2(this,r,h),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted,this),this.showTorqueTip(r);else 0==this._model&&(this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),CMovieClipUtil.playMovieClip2(this,r,h),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted,this),this.showTorqueTip(r))}}}else if("false"==o.isGotoNextScene)if(""==o.useToolID){for(_=0;_<l.numChildren;_++)-1!=l.getChildAt(_).name.indexOf("part_")&&(a=l.getChildAt(_));if(null!=a){if(a.ndata.iname!=o.scenePartID)return;var u=CHitTestUtil.hitTestRect(e,a);1==u&&(e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),""!=o.scenePartID&&(this[o.scenePartID].visible=!0),""!=o.partPanelIconID&&this.dispatchEvent(new DataEvents(DataEvents.hide_icon_part,o.partPanelIconID)),this.hideHotspots(parseInt(o.nextHotspot)))}}else{for(d=0;d<l.numChildren;d++)-1!=l.getChildAt(d).name.indexOf("tool_")&&(s=l.getChildAt(d));if(null!=s){if(s.ndata.senceItemID!=o.useToolID)return;var u=CHitTestUtil.hitTestRect(e,s);if(1==u)if(1==this._model)if(null!=o.TorqueSelectIndex&&""!=o.TorqueSelectIndex){var v=new Object,p=new Object;p.type=2,p.target=e,p._toolAniID=r,p._toolAniCount=h,v.ndata=o,v.ndata2=p,this.dispatchEvent(new DataEvents(DataEvents.show_torqueSelectPanel,v))}else this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),CMovieClipUtil.playMovieClip2(this,r,h),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted2,this),this.showTorqueTip(r);else 0==this._model&&(this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),e.visible=!1,c.records=o.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,c)),CMovieClipUtil.playMovieClip2(this,r,h),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted2,this),this.showTorqueTip(r))}}},n.playItemAni=function(t){var e=new Object;if(e.color="normal",1==t.ndata2.type){var i=t.ndata,n=t.ndata2;this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),n.target.visible=!1,e.records=i.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,e)),CMovieClipUtil.playMovieClip2(this,n._toolAniID,n._toolAniCount),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted,this)}else if(2==t.ndata2.type){var i=t.ndata,n=t.ndata2;this.dispatchEvent(new DataEvents(DataEvents.hide_sceneItem)),n.target.visible=!1,e.records=i.content,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,e)),CMovieClipUtil.playMovieClip2(this,n._toolAniID,n._toolAniCount),this.addEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted2,this)}},n.onToolAniPlayCompleted=function(t){this.removeEventListener("MC_play_completed",this.onToolAniPlayCompleted,this),this.hideTorqueTip(),console.log("开始播放转场动画：");var e=this.tempSenceDataObj.sceneAni,i=parseInt(this.tempSenceDataObj.sceneAniCount);CMovieClipUtil.playMovieClip2(this,e,i),this.isSceneOperateCompleted=!0,this.addEventListener(DataEvents.MC_play_completed,this.onSenceAniPlayCompleted,this)},n.onToolAniPlayCompleted2=function(t){this.removeEventListener(DataEvents.MC_play_completed,this.onToolAniPlayCompleted2,this),this.hideTorqueTip(),this._currentClickHotspot.visible=!1,""!=this._currentClickHotspot.ndata.scenePartID&&(this[this._currentClickHotspot.ndata.scenePartID].visible=!1),this.hideHotspots(parseInt(this._currentClickHotspot.ndata.nextHotspot))},n.onSenceAniPlayCompleted=function(t){this.removeEventListener(DataEvents.MC_play_completed,this.onSenceAniPlayCompleted,this),console.log("COMPLETE"),this.dispatchEvent(new DataEvents(DataEvents.goto_next_scene,this._sceneData))},n.hideHotspots=function(t){var e=this["hotspot_"+t.toString()];null!=e&&(e.visible=!0,this._nowHotspot=e)},n.hideHotspot=function(t){t.senceItemID!=this._nowHotspot.ndata.useToolID&&(this._nowHotspot.visible=!1)},n.hideHotspot2=function(t){t.iname!=this._nowHotspot.ndata.scenePartID&&(this._nowHotspot.visible=!1)},n.showHopspot=function(){this._nowHotspot.visible=!0},n.setVirtualModel=function(t){this._model=t},n.showTorqueTip=function(t){if(0==this._model){var e=t.substr(8),i="torqueTip_"+e+"_png",n=CImageUtil.getImageFromeRES(i);null!=n&&(this._torqueTip=new eui.Image,this._torqueTip.source=n,this.addChild(this._torqueTip),this._torqueTip.name="torqueTip_"+e,this._torqueTip.visible=!0)}},n.hideTorqueTip=function(){0==this._model&&null!=this._torqueTip&&this.contains(this._torqueTip)&&(this._torqueTip.visible=!1,this.removeChild(this._torqueTip),this._torqueTip=null)},e}(eui.Component);egret.registerClass(SubScenePanel,"SubScenePanel");var StandardPanel=function(t){function e(){t.call(this),this._xmlAry=new Array,this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Panel/StandardPanelSkin.exml",mouse.setButtonMode(this.btn_close,!0),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTouchTap,this);var t=new eui.Group,e=new eui.Scroller;e.width=DigitalUtil.digital_001,e.height=DigitalUtil.digital_002,e.viewport=t,this.addChild(e),e.x=DigitalUtil.digital_003,e.y=DigitalUtil.digital_004,this.addJSON()},n.onBtnCloseTouchTap=function(t){this.visible=!1},n.addXML=function(){var t=new egret.URLLoader;t.addEventListener(egret.Event.COMPLETE,this.loaderComplete,this);var e=new egret.URLRequest("resource/assets/xml/standardInfo.xml");t.load(e)},n.loaderComplete=function(t){for(var e=t.target,i=egret.XML.parse(e.data),n=i.children,s=0;s<n.length;s++){var a=new Object,o=n[s];a.comment=o.attributes.content,a.id=o.attributes.id,this._xmlAry.push(a)}},n.addJSON=function(){var t=RES.getRes("standardInfo_json"),e=t.menu.Item,i=new TabText(e);this.addChild(i),i.x=12,i.y=42},e}(eui.Component);egret.registerClass(StandardPanel,"StandardPanel");var SubmitsPanel=function(t){function e(){t.call(this),this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){this.skinName="resource/eui_skins/Panel/SubmitPanelSkin.exml",this.viewStack.selectedIndex=0,mouse.setButtonMode(this.btn_close,!0),mouse.setButtonMode(this.btn_yes,!0),mouse.setButtonMode(this.btn_no,!0),mouse.setButtonMode(this.btn_watchRecord,!0),mouse.setButtonMode(this.btn_return,!0),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTap,this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnYesTap,this),this.btn_no.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnNoTap,this),this.btn_watchRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnWatchRecordTap,this),this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturnTap,this)},n.onBtnCloseTap=function(t){this.visible=!1},n.onBtnYesTap=function(t){egret.Event.dispatchEvent(this,DataEvents.get_total_score),this.viewStack.selectedIndex=1},n.onBtnNoTap=function(t){this.visible=!1},n.onBtnWatchRecordTap=function(t){egret.Event.dispatchEvent(this,DataEvents.open_record_panel)},n.onBtnReturnTap=function(t){egret.Event.dispatchEvent(this,DataEvents.return_to_mainEntryPanel)},n.setScore=function(t){this.txt_score.text=t},e}(eui.Component);egret.registerClass(SubmitsPanel,"SubmitsPanel");var ToolsPanel=function(t){function e(){t.call(this),this._maxIndex=DigitalUtil.digital_006,this.itemBtnAry=new Array,this.toolSetBtnAry=new Array,this.itemDataAry=new Array,this._tempItemDataAry=new Array,this.toolSetsDataAry=new Array,this.tip=new MouseTipPanel,this.initdata()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initdata=function(){this.skinName="resource/eui_skins/Panel/ToolsPanelSkin.exml",this.btn_decompose.enabled=!1,mouse.setButtonMode(this.btn_rigth,!0),mouse.setButtonMode(this.btn_left,!0),mouse.setButtonMode(this.btn_close,!0),mouse.setButtonMode(this.btn_combine,!0),mouse.setButtonMode(this.btn_decompose,!0),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCloseTouchTap,this),this.btn_rigth.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnRightTouchTap,this),this.btn_left.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnLeftTouchTap,this),this.btn_combine.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnCombineTouchTap,this),this.btn_decompose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnDecomposeTouchTap,this);for(var t=0;t<this.group_item.numChildren;t++)-1!=this.group_item.getChildAt(t).name.indexOf("item_")&&this.itemBtnAry.push(this.group_item.getChildAt(t));var e=this.itemBtnAry.length+1;this.itemBtnAry=[];for(var i=1;e>i;i++){var n=this["item_"+i];this.itemBtnAry.push(n),n.source=null,mouse.setButtonMode(n,!0),this.tip.setTips2(n,this.group_item),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemBtnTouchTap,this)}for(var s=0;s<this.numChildren;s++)-1!=this.getChildAt(s).name.indexOf("toolSet_")&&this.toolSetBtnAry.push(this.getChildAt(s));var a=this.toolSetBtnAry.length+1;this.toolSetBtnAry=[];for(var o=1;a>o;o++){var r=this["toolSet_"+o];this.toolSetBtnAry.push(r),r.source=null,r.ndata=this.setNdataNull(),mouse.setButtonMode(r,!0),this.tip.setTips2(r,this),r.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onToolSetBtnTouchTap,this)}this.toolSets.source=null,mouse.setButtonMode(this.toolSets,!0),this.tip.setTips2(this.toolSets,this),this.toolSets.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onToolSetsBtnTap,this),this.addJSON1(),this.addJSON2()},n.addJSON1=function(){var t=RES.getRes("toolsInfo_json"),e=t.menu.Item;this.itemDataAry=e;for(var i=0;i<this.itemDataAry.length;i++)this.itemDataAry[i].isUse="false";this.initItemIcon()},n.addJSON2=function(){var t=RES.getRes("toolSetsInfo_json"),e=t.menu.Item;this.toolSetsDataAry=e},n.initItemIcon=function(){this._tempItemDataAry=this.itemDataAry;for(var t=0;t<this.itemBtnAry.length;t++){var e=this.itemBtnAry[t];this._tempItemDataAry[t]&&(e.source=CImageUtil.getImageFromeRES(this._tempItemDataAry[t].resources),e.ndata=this._tempItemDataAry[t])}this._totalIndex=this._tempItemDataAry.length,this._tempItemDataAry.length>=this._maxIndex?this._currentIndex=this._maxIndex:this._currentIndex=this._tempItemDataAry.length,this.setTxtPageValue(this._currentIndex,this._totalIndex)},n.onBtnRightTouchTap=function(t){if(!(this._totalIndex<=this._maxIndex||this._currentIndex>=this._totalIndex)){for(var e=0;e<this.itemBtnAry.length;e++){var i=this.itemBtnAry[e];i.source=null;var n=this._currentIndex+e;this._tempItemDataAry[n]&&(i.source=CImageUtil.getImageFromeRES(this._tempItemDataAry[n].resources),i.ndata=this._tempItemDataAry[n])}this._currentIndex=this._currentIndex+this._maxIndex,this.setTxtPageValue(this._currentIndex,this._totalIndex)}},n.onBtnLeftTouchTap=function(t){if(!(this._totalIndex<=this._maxIndex||this._currentIndex<=this._maxIndex)){for(var e=0;e<this.itemBtnAry.length;e++){var i=this.itemBtnAry[e];i.source=null;var n=this._currentIndex-2*this._maxIndex+e;this._tempItemDataAry[n]&&(i.source=CImageUtil.getImageFromeRES(this._tempItemDataAry[n].resources),i.ndata=this._tempItemDataAry[n])}this._currentIndex=this._currentIndex-this._maxIndex,this.setTxtPageValue(this._currentIndex,this._totalIndex)}},n.setTxtPageValue=function(t,e){var i=Math.ceil(t/this._maxIndex),n=Math.ceil(e/this._maxIndex);this.txt_page.text=i.toString()+" / "+n.toString()},n.onBtnCloseTouchTap=function(t){this.visible=!1},n.onItemBtnTouchTap=function(t){var e=t.currentTarget,i=e.ndata;console.log("itemTool:"+i.id+"——"+i.name);var n=i.isToolSets;if("false"==n)this.sendMessage(i);else if("true"==n){var s=parseInt(i.toolSetIndex),a=this["toolSet_"+s.toString()];if(null!=a.source){for(var o=0;o<this.itemDataAry.length;o++)this.itemDataAry[o].name==a.ndata.name&&(this.itemDataAry[o].isUse="false");a.source=null}a.source=CImageUtil.getImageFromeRES(i.resources),a.ndata=i;for(var r=0;r<this._tempItemDataAry.length;r++)this._tempItemDataAry[r].name==i.name&&(this._tempItemDataAry[r].isUse="true");this.updateItem()}},n.onToolSetBtnTouchTap=function(t){var e=t.currentTarget,i=e.ndata;e.source=null,e.ndata=this.setNdataNull();for(var n=0;n<this.itemDataAry.length;n++)this.itemDataAry[n].name==i.name&&(this.itemDataAry[n].isUse="false");this.updateItem()},n.onToolSetsBtnTap=function(t){this.sendMessage(t.currentTarget.ndata)},n.updateItem=function(){for(var t=new Array,e=0;e<this.itemDataAry.length;e++)"false"==this.itemDataAry[e].isUse&&t.push(this.itemDataAry[e]);for(var i=0;i<this.itemBtnAry.length;i++){var n=this.itemBtnAry[i];n.source=null,t[i]&&(n.source=CImageUtil.getImageFromeRES(t[i].resources),n.ndata=t[i])}this._tempItemDataAry=t,this._totalIndex=this._tempItemDataAry.length,this._tempItemDataAry.length>=this._maxIndex?this._currentIndex=this._maxIndex:this._currentIndex=this._tempItemDataAry.length,this.setTxtPageValue(this._currentIndex,this._totalIndex)},n.onBtnCombineTouchTap=function(t){for(var e=0;e<this.toolSetsDataAry.length;e++)if(this.toolSetsDataAry[e].toolSet1Name==this.toolSet_1.ndata.name&&this.toolSetsDataAry[e].toolSet2Name==this.toolSet_2.ndata.name&&this.toolSetsDataAry[e].toolSet3Name==this.toolSet_3.ndata.name){this.toolSets.source=this.toolSetsDataAry[e].resources,this.toolSets.ndata=this.toolSetsDataAry[e];for(var i=0;i<this.toolSetBtnAry.length;i++)this.toolSetBtnAry[i].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onToolSetBtnTouchTap,this);this.btn_combine.enabled=!1,this.btn_decompose.enabled=!0;for(var n=0;n<this.itemBtnAry.length;n++)"true"==this.itemBtnAry[n].ndata.isToolSets&&this.itemBtnAry[n].removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemBtnTouchTap,this)}},n.onBtnDecomposeTouchTap=function(t){this.toolSets.source=null;for(var e=0;e<this.toolSetBtnAry.length;e++)this.toolSetBtnAry[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onToolSetBtnTouchTap,this);this.btn_combine.enabled=!0,this.btn_decompose.enabled=!1;for(var i=0;i<this.itemBtnAry.length;i++)"true"==this.itemBtnAry[i].ndata.isToolSets&&this.itemBtnAry[i].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemBtnTouchTap,this)},n.sendMessage=function(t){this.visible=!1,this.dispatchEvent(new DataEvents(DataEvents.show_sence_tool,t))},n.showItem=function(t){this.updateItem()},n.hideItem=function(t){this.updateItem()},n.setNdataNull=function(){var t=new Object;return t.name="",t},e}(eui.Component);egret.registerClass(ToolsPanel,"ToolsPanel");var TorqueSelectPanel=function(t){function e(){t.call(this),this.selectBtnAry=new Array,this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){this.skinName="resource/eui_skins/Panel/TorqueSelectPanelSkin.exml",this.viewStack.selectedIndex=0;for(var t=0;t<this.viewStack.numChildren;t++)if(-1!=this.viewStack.getChildAt(t).name.indexOf("group_"))for(var e=this.viewStack.getChildAt(t),i=0;i<e.numChildren;i++)-1!=e.getChildAt(i).name.indexOf("selectBtn_")&&(this.selectBtnAry.push(e.getChildAt(i)),e.getChildAt(i).addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelectBtnTap,this))},n.setGroupIndex=function(t){this.viewStack.selectedIndex=0},n.onSelectBtnTap=function(t){this.visible=!1,this.dispatchEvent(new DataEvents(DataEvents.torque_selected,this._obj));var e,i,n=t.target.name.substr(10),s=this._ndata.TorqueSelectRight,a=parseInt(this._ndata.TorqueSelectScore),o=new Object,r=n.split("_");n==s?(e="0"==r[1]?r[0]+" Nm":r[0]+" Nm"+r[1]+" °",i="拧紧力矩："+e+"[扭矩正确] "+a.toString(),o.isRight=!0,o.color="right"):(e="0"==r[1]?r[0]+" Nm":r[0]+" Nm"+r[1]+" °",i="拧紧力矩："+e+"[扭矩错误] -"+a.toString(),o.isRight=!1,o.color="wrong"),o.score=a,o.record=i,this.dispatchEvent(new DataEvents(DataEvents.add_training_records,o))},n.setAttribute=function(t){this._ndata=t.ndata,this._ndata2=t.ndata2,this._obj=t,this.viewStack.selectedIndex=parseInt(this._ndata.TorqueSelectIndex)},e}(eui.Component);egret.registerClass(TorqueSelectPanel,"TorqueSelectPanel");var PlaybackControlsPanel=function(t){function e(){t.call(this),this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){this.hSlider.maximum=this.hSlider.width,this.hSlider.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this)},n.changeHandler=function(t){console.log(t.target.value)},e}(eui.Component);egret.registerClass(PlaybackControlsPanel,"PlaybackControlsPanel");var VideoPanel=function(t){function e(){t.call(this),this._pauseTime=0,this.skinName="resource/eui_skins/VideoPlayer/VideoPanelSkin.exml",this.initData()}__extends(e,t);var i=(__define,e),n=i.prototype;return n.initData=function(){this.initView()},n.play=function(){this.stop(),this._video.play(this._pauseTime,!1),this._video.addEventListener(egret.Event.ENDED,this.onComplete,this)},n.stop=function(){this._video.pause()},n.onComplete=function(t){console.log("播放结束"),this._video.removeEventListener(egret.Event.ENDED,this.onComplete,this)},n.changeScreen=function(){this._video.paused||(this._video.fullscreen=!this._video.fullscreen)},n.updataResources=function(t){null==this._video&&(this._video=new egret.Video,this._video.x=0,this._video.y=0,this._video.width=1104,this._video.height=530,this._video.fullscreen=!1,this._video.load(t),this.addChild(this._video),this._video.addEventListener(egret.Event.COMPLETE,this.loadVideoComplete2,this),this._video.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame1,this))},n.loadVideoComplete2=function(){this._pauseTime=0,this._video.play(this._pauseTime,!1),this.setChildIndex(this.controlsPanel,this.numChildren-1)},n.initView=function(){this.setChildIndex(this.controlsPanel,this.numChildren-1),this._btn_PlayOrStop=this.controlsPanel.btn_PlayOrStop,this._btn_Return=this.controlsPanel.btn_return,this._txt_time=this.controlsPanel.txt_time,this._hSlider=this.controlsPanel.hSlider,this._btn_refresh=this.controlsPanel.btn_refresh,this._hSlider.maximum=this._hSlider.width,this._btn_refresh.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnRefreshTap,this),this._btn_Return.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnReturnTouchTap,this),this._btn_PlayOrStop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBtnPlayOrStopTouchTap,this),this._hSlider.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHSliderTcouhBegin,this),this._hSlider.addEventListener(egret.TouchEvent.TOUCH_END,this.onHSliderTcouhEnd,this),this._hSlider.addEventListener(eui.UIEvent.CHANGE_START,this.onHSliderChangeStart,this),this._hSlider.addEventListener(eui.UIEvent.CHANGE,this.onHSliderChange,this),this._hSlider.addEventListener(eui.UIEvent.CHANGE_END,this.onHSliderChangeEnd,this)},n.onBtnRefreshTap=function(t){null!=this._video&&this.stop(),this.dispatchEvent(new DataEvents(DataEvents.refresh_video_panel))},n.onBtnReturnTouchTap=function(t){this.visible=!1,this._video.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame1,this),this.stop(),this._btn_PlayOrStop.selected=!0,this._hSlider.value=0,null!=this._video&&this.contains(this._video)&&(this.removeChild(this._video),this._video.src=null,this._video=null)},n.onBtnPlayOrStopTouchTap=function(t){var e=t.currentTarget;1==e.selected?(this._video.play(this._pauseTime,!1),this._video.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame1,this)):(this._video.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame1,this),this._pauseTime=this._video.position,this._video.pause())},n.onEnterFrame1=function(t){this._str=CTimeFormat.convertTime(this._video.position),this.setTxtTimeLabel(this._str);var e=this._video.position/this._video.length*this._hSlider.maximum;this._hSlider.value=e},n.setTxtTimeLabel=function(t){this._txt_time.text=t},n.onHSliderTcouhBegin=function(t){},n.onHSliderTcouhEnd=function(t){},n.onHSliderChangeStart=function(t){this._pauseTime=this._video.position,this._video.pause(),this._video.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame1,this)},n.onHSliderChange=function(t){var e=this._hSlider.value/this._hSlider.maximum*this._video.length;this._pauseTime=e,this._str=CTimeFormat.convertTime(this._video.position),this.setTxtTimeLabel(this._str)},n.onHSliderChangeEnd=function(t){var e=this._hSlider.value/this._hSlider.maximum*this._video.length;this._pauseTime=e,this._video.play(this._pauseTime,!1),this._btn_PlayOrStop.selected=!0,this._video.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame1,this)},e}(eui.Component);egret.registerClass(VideoPanel,"VideoPanel");var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,n){function s(t){e.call(n,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var CHitTestUtil=function(){function t(){}var e=(__define,t);e.prototype;return t.hitTestRect=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,i.intersects(n)},t.hitTestPoint=function(t,e,i,n){return t.hitTestPoint(e,i,n)},t.HitTestObject=function(e,i,n){var s=e.localToGlobal(e.x,e.y),a=e.localToGlobal(i.x,i.y),o=t.isCollsionWithRect(s.x,s.y,e.width,e.height,a.x,a.y,i.width,i.height);if(o&&1==n){var r=new egret.RenderTexture;r.drawToTexture(e);var h=0,l=0,d=0;for(l=0;l<r._bitmapWidth;l++)for(d=0;d<r._bitmapHeight;d++)0!=r.getPixel32(l,d)[3]&&h++;r.dispose();var _=new egret.RenderTexture;_.drawToTexture(i);var c=0;for(l=0;l<_._bitmapWidth;l++)for(d=0;d<_._bitmapHeight;d++)0!=_.getPixel32(l,d)[3]&&c++;_.dispose();var u=new egret.RenderTexture,v=new egret.Sprite,p=e.parent,m=p.getChildIndex(e),g=e.x,E=e.y,f=i.parent,T=f.getChildIndex(i),y=i.x,P=i.y;e.x=s.x,e.y=s.y,i.x=a.x,i.y=a.y,v.addChild(e),v.addChild(i),u.drawToTexture(v),e.x=g,e.y=E,i.x=y,i.y=P,p.addChildAt(e,m),f.addChildAt(i,T);var C=0;for(l=0;l<u._bitmapWidth;l++)for(d=0;d<u._bitmapHeight;d++)0!=u.getPixel32(l,d)[3]&&C++;return u.dispose(),h+c!=C}return o},t.isCollsionWithRect=function(t,e,i,n,s,a,o,r){return t>=s&&t>=s+o?!1:s>=t&&s>=t+i?!1:e>=a&&e>=a+r?!1:a>=e&&a>=e+n?!1:!0},t}();egret.registerClass(CHitTestUtil,"CHitTestUtil");var CImageUtil=function(){function t(){}var e=(__define,t);e.prototype;return t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);
return e.texture=i,e},t.getImageFromeRES=function(t){var e=RES.getRes(t);return e},t}();egret.registerClass(CImageUtil,"CImageUtil");var CMovieClipUtil=function(){function t(){}var e=(__define,t);e.prototype;return t.playMovieClip=function(t,e,i,n,s,a,o,r){function h(t){E.removeEventListener(egret.MovieClipEvent.ENTER_FRAME,h,this)}function l(t){E.removeEventListener(egret.MovieClipEvent.FRAME_LABEL,l,this)}function d(t){1==r&&(E.visible=!0),egret.Event.dispatchEvent(E.parent,DataEvents.MC_play_LoopCompleted)}function _(t){egret.Event.dispatchEvent(E.parent,DataEvents.MC_play_completed),1==s&&c()}function c(){E.visible=!1,t.contains(E)&&(E.removeEventListener(egret.MovieClipEvent.ENTER_FRAME,h,this),E.removeEventListener(egret.MovieClipEvent.FRAME_LABEL,l,this),E.removeEventListener(egret.Event.LOOP_COMPLETE,d,this),E.removeEventListener(egret.Event.COMPLETE,_,this),t.removeChild(E),E=null)}void 0===n&&(n=1),void 0===s&&(s=!1),void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=!1);var u=e+"_json",v=e+"_png",p=RES.getRes(u),m=RES.getRes(v),g=new egret.MovieClipDataFactory(p,m),E=new egret.MovieClip(g.generateMovieClipData(i));t.addChild(E),E.x=a,E.y=o,1==r?(E.visible=!1,E.gotoAndPlay(1,n)):(E.visible=!0,E.gotoAndPlay(1,n)),E.addEventListener(egret.MovieClipEvent.ENTER_FRAME,h,this),E.addEventListener(egret.MovieClipEvent.FRAME_LABEL,l,this),E.addEventListener(egret.Event.LOOP_COMPLETE,d,this),E.addEventListener(egret.Event.COMPLETE,_,this)},t.playMovieClip2=function(t,e,i,n,s){function a(t){var i,n=t.target.currentCount;n>=0&&10>n?i="000"+n.toString():n>=10&&100>n?i="00"+n.toString():n>=100&&1e3>n&&(i="0"+n.toString());var s=e+"_"+i+"_png";r.source=CImageUtil.getImageFromeRES(s)}function o(e){l.stop(),l.removeEventListener(egret.TimerEvent.TIMER,a,this),l.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,o,this),l=null,null!=r&&t.contains(r)&&(t.removeChild(r),r=null),egret.Event.dispatchEvent(t,DataEvents.MC_play_completed)}void 0===n&&(n=0),void 0===s&&(s=0);var r=new eui.Image;t.addChild(r),r.x=n,r.y=s;var h=33,l=new egret.Timer(h,i);l.addEventListener(egret.TimerEvent.TIMER,a,this),l.addEventListener(egret.TimerEvent.TIMER_COMPLETE,o,this),l.start()},t}();egret.registerClass(CMovieClipUtil,"CMovieClipUtil");var CMovieClipUtil2=function(t){function e(e,i,n){void 0===n&&(n=1),t.call(this),this.playMovieClip(e,i,n)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.playMovieClip=function(t,e,i){void 0===i&&(i=1),this._parth=t,this._name=e,this._mc_count=i;var n=new egret.URLLoader;n.dataFormat=egret.URLLoaderDataFormat.TEXT,n.addEventListener(egret.Event.COMPLETE,this.onLoadJsonComplete,this);var s=this._parth+".json",a=new egret.URLRequest(s);n.load(a)},n.onLoadJsonComplete=function(t){var e=t.target;this.data=JSON.parse(e.data);var e=new egret.URLLoader;e.dataFormat=egret.URLLoaderDataFormat.TEXTURE,e.addEventListener(egret.Event.COMPLETE,this.onLoadTextureComplete,this);var i=this._parth+".png",n=new egret.URLRequest(i);e.load(n)},n.onPNGProgress=function(t){var e=t.bytesLoaded/t.bytesTotal;console.log(e)},n.onLoadTextureComplete=function(t){var e=t.target;this.texture=e.data,this.dispatchEvent(new DataEvents("MC_load_completed")),this.createMovieClip()},n.createMovieClip=function(){var t=new egret.MovieClipDataFactory(this.data,this.texture),e=new egret.MovieClip(t.generateMovieClipData(this._name));this.addChild(e),e.addEventListener(egret.Event.COMPLETE,function(){console.log("COMPLETE"),this.dispatchEvent(new DataEvents("MC_play_completed"))},this),e.addEventListener(egret.Event.LOOP_COMPLETE,function(){console.log("LOOP_COMPLETE"),this.dispatchEvent(new DataEvents("MC_play_LoopCompleted"))},this),e.gotoAndPlay(1,this._mc_count)},e}(egret.DisplayObjectContainer);egret.registerClass(CMovieClipUtil2,"CMovieClipUtil2");var CRESLoadUtil=function(){function t(t){this._groupName=t,this.initData()}var e=(__define,t),i=e.prototype;return i.initData=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(this._groupName)},i.onResourceLoadComplete=function(t){t.groupName==this._groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),console.log("CRESLoadUtil:"+this._groupName))},i.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},i.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},i.onResourceProgress=function(t){t.groupName==this._groupName},t}();egret.registerClass(CRESLoadUtil,"CRESLoadUtil");var CSoundUtil=function(){function t(){}var e=(__define,t);e.prototype;return t.playSound=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=1);var n=RES.getRes(t);1==i?n.play(0,1):n.play()},t}();egret.registerClass(CSoundUtil,"CSoundUtil");var CTimeFormat=function(){function t(){}var e=(__define,t);e.prototype;return t.getTime3=function(){var t="",e=new Date,i=this.getPrefixNum(e.getHours()),n=this.getPrefixNum(e.getMinutes()),s=this.getPrefixNum(e.getSeconds());return t="["+i+":"+n+":"+s+"]   "},t.getPrefixNum=function(t){return 10>t&&t>=0?"0"+t.toString():t.toString()},t.getTime1=function(){var t="",e=new Date,i=this.getPrefixNum(e.getHours()),n=this.getPrefixNum(e.getMinutes()),s=this.getPrefixNum(e.getSeconds());return t=i+":"+n+":"+s},t.formatSeconds=function(t){var e=parseInt(t),i=0,n=0;e>60&&(i=e/60,e%=60,i>60&&(n=i/60,i%=60));var s="0:"+e;return i>0&&(s="0:"+i+":"+e),n>0&&(s=n+"0:"+i+":"+e),s},t.convertTime=function(t){var e,i=Math.round(t%3600/60),n=Math.round(t%60);return e=(10>i?"0"+i:""+i)+":"+(10>n?"0"+n:""+n)},t}();egret.registerClass(CTimeFormat,"CTimeFormat");var CXMLUtil=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);i.prototype;return e.addXML=function(t,e){function i(t){var i=t.target,n=egret.XML.parse(i.data);e.dispatchEvent(new DataEvents(DataEvents.xml_load_completed,n))}var n=new egret.URLLoader;n.addEventListener(egret.Event.COMPLETE,i,this);var s=new egret.URLRequest(t);n.load(s)},e.getXMLFromeRES=function(t){var e=RES.getRes(t);return e},e}(egret.DisplayObjectContainer);egret.registerClass(CXMLUtil,"CXMLUtil");var WebView=function(t){function e(e){t.call(this),this._x=0,this._y=0,this._width=0,this._height=0,this._src="",this._scaleMode=egret.MainContext.instance.stage.scaleMode,this._iframeWrapper=null,this._iframe=null;var i=document.getElementById("StageDelegateDiv"),n=i.parentElement,s=document.getElementById("iframe-wrapper");s||(s=document.createElement("div"),s.style.display="none",s.attributes.style.value+="position:absolute;-webkit-overflow-scrolling: touch;overflow-y: scroll;",s.id="iframe-wrapper",i.appendChild(s)),this._iframeWrapper=s,this._iframeWrapper.style.display="none",this._iframeWrapper.style.opacity="0";var a=document.createElement("iframe"),o=(new Date).getTime();a.src=e,a.id="webview-iframe-"+o,a.name="webview-iframe-"+o,a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.opacity="0",a.style.display="none",a.frameBorder="0",a.border="0",this._iframeWrapper.appendChild(a),this._iframe=document.getElementById("webview-iframe-"+o);var r=this;this._iframe.onload=function(){r._iframeWrapper.style.opacity="1",r._iframe.style.opacity="1"},this._stageW=egret.MainContext.instance.stage.stageWidth,this._stageH=egret.MainContext.instance.stage.stageHeight,this._windowW=window.innerWidth,this._windowH=window.innerHeight,this._designH=parseInt(n.attributes["data-content-height"].value),this._designW=parseInt(n.attributes["data-content-width"].value);var h=egret.sys.screenAdapter.calculateStageSize(egret.MainContext.instance.stage.scaleMode,this._windowW,this._windowH,this._designW,this._designH);this._displayH=h.displayHeight,this._displayW=h.displayWidth,console.log("windowW:"+this._windowW),console.log("stageW:"+this._stageW),console.log("disPlayW:"+this._displayW),console.log("windowH:"+this._windowH),console.log("stageH:"+this._stageH),console.log("displayH:"+this._displayH)}__extends(e,t);var i=__define,n=e,s=n.prototype;return s.show=function(){this._iframe.style.display="block",this._iframeWrapper.style.display="block"},s.destroy=function(){this._iframe&&(this._iframeWrapper.style.display="none",this._iframeWrapper.removeChild(this._iframe))},i(s,"width",function(){return this._width},function(t){this._width=t,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframe.width=this._width/this._stageW*this._windowW+"px",this._iframeWrapper.style.width=this._width/this._stageW*this._windowW+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowW==this._displayW?(this._iframe.style.width=this._width/this._stageW*this._windowW+"px",this._iframeWrapper.style.width=this._width/this._stageW*this._windowW+"px"):(this._iframe.style.width=this._width/this._stageW*this._displayW+"px",this._iframeWrapper.style.width=this._width/this._stageW*this._displayW+"px"))}),i(s,"height",function(){return this._height},function(t){this._height=t,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframe.height=this._height/this._stageH*this._windowH+"px",this._iframeWrapper.style.height=this._height/this._stageH*this._windowH+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowH==this._displayH?(this._iframe.style.height=this._height/this._stageH*this._windowH+"px",this._iframeWrapper.style.height=this._height/this._stageH*this._windowH+"px"):(this._iframe.style.height=this._height/this._stageH*this._displayH+"px",this._iframeWrapper.style.height=this._height/this._stageH*this._displayH+"px"))}),i(s,"x",function(){return this._x},function(t){this._x=t,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframeWrapper.style.left=this._x/this._stageW*this._windowW+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowW==this._displayW?this._iframeWrapper.style.left=this._x/this._stageW*this._windowW+"px":this._iframeWrapper.style.left=this._x/this._stageW*this._displayW+"px")}),i(s,"y",function(){return this._y},function(t){this._y=t,(this._scaleMode==egret.StageScaleMode.FIXED_WIDTH||this._scaleMode==egret.StageScaleMode.FIXED_HEIGHT)&&(this._iframeWrapper.style.top=this._y/this._stageH*this._windowH+"px"),(this._scaleMode==egret.StageScaleMode.SHOW_ALL||this._scaleMode==egret.StageScaleMode.NO_BORDER)&&(this._windowH==this._displayH?this._iframeWrapper.style.top=this._y/this._stageH*this._windowH+"px":this._iframeWrapper.style.top=this._y/this._stageH*this._displayH+"px")}),i(s,"src",function(){return this._src},function(t){this._src=t}),e}(egret.DisplayObjectContainer);egret.registerClass(WebView,"WebView");